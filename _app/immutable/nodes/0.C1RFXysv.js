import{c as l,a as h}from"../chunks/DKZZsbTD.js";import{i as u,E as p,j as g,n as f,k as E,l as v,m as y,p as L,o as k,q as b,s as S}from"../chunks/DNYHnErA.js";import{s as i}from"../chunks/BaP2VK7C.js";function T(r,s,...o){var a=r,n=f,e;u(()=>{n!==(n=s())&&(e&&(E(e),e=null),e=g(()=>n(a,...o)))},p),v&&(a=y)}function A(r,s){L(s,!0),k(()=>{console.log("Layout mounted");const n=i.subscribe(c=>{console.log("Settings changed:",c);let t=c.app.theme;console.log("Current theme:",t),t==="system"&&(t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",console.log("System theme detected:",t)),console.log("Applying theme:",t),document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(t),console.log("HTML classes:",document.documentElement.classList.toString())}),e=window.matchMedia("(prefers-color-scheme: dark)"),m=c=>{if(i.get().app.theme==="system"){const d=c.matches?"dark":"light";document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(d)}};return e.addEventListener("change",m),()=>{n(),e.removeEventListener("change",m)}});var o=l(),a=b(o);T(a,()=>s.children),h(r,o),S()}export{A as component};
